<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=300, height=400, user-scalable=no">
  <title>Live2D æ¡Œé¢å® ç‰©æµ‹è¯•</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      width: 300px;
      height: 400px;
      background: transparent;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      position: relative;
    }
    
    .pet-container {
      width: 100%;
      height: 100%;
      position: relative;
      background: linear-gradient(135deg, rgba(74, 144, 226, 0.1), rgba(80, 227, 194, 0.1));
      border-radius: 20px;
      overflow: hidden;
    }
    
    .model-area {
      width: 100%;
      height: 80%;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    
    .live2d-placeholder {
      width: 200px;
      height: 200px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.2);
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .controls-area {
      position: absolute;
      bottom: 10px;
      right: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .control-btn {
      width: 40px;
      height: 40px;
      background: rgba(0, 0, 0, 0.7);
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .control-btn:hover {
      background: rgba(0, 0, 0, 0.9);
      transform: scale(1.1);
    }
    
    .status-bar {
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 12px;
      text-align: center;
      backdrop-filter: blur(10px);
    }
    
    .debug-info {
      position: absolute;
      bottom: 60px;
      left: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: #00ff00;
      padding: 8px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 10px;
      max-width: 200px;
      display: none;
    }
    
    .debug-info.show {
      display: block;
    }
    
    .notification {
      position: absolute;
      top: 50px;
      left: 10px;
      right: 10px;
      background: rgba(52, 152, 219, 0.9);
      color: white;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 12px;
      text-align: center;
      transform: translateY(-100px);
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .notification.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    /* æ‹–æ‹½ç›¸å…³æ ·å¼ */
    .dragging {
      cursor: move !important;
    }
    
    .no-drag {
      -webkit-app-region: no-drag;
    }
    
    .drag {
      -webkit-app-region: drag;
    }
  </style>
</head>
<body>
  <div class="pet-container drag">
    <!-- çŠ¶æ€æ  -->
    <div class="status-bar">
      ğŸ¾ Live2D æ¡Œé¢å® ç‰©æµ‹è¯•æ¨¡å¼
    </div>
    
    <!-- æ¨¡å‹æ˜¾ç¤ºåŒºåŸŸ -->
    <div class="model-area">
      <div class="live2d-placeholder">
        ğŸ¦Š
      </div>
    </div>
    
    <!-- æ§åˆ¶æŒ‰é’® -->
    <div class="controls-area no-drag">
      <button class="control-btn" onclick="toggleExpression()" title="è¡¨æƒ…">ğŸ­</button>
      <button class="control-btn" onclick="playMotion()" title="åŠ¨ä½œ">ğŸ¬</button>
      <button class="control-btn" onclick="toggleAudio()" title="éŸ³é¢‘">ğŸ”Š</button>
      <button class="control-btn" onclick="toggleLipSync()" title="å£å‹åŒæ­¥">ğŸ—£ï¸</button>
      <button class="control-btn" onclick="toggleSettings()" title="è®¾ç½®">âš™ï¸</button>
      <button class="control-btn" onclick="toggleDebug()" title="è°ƒè¯•">ğŸ›</button>
    </div>
    
    <!-- è°ƒè¯•ä¿¡æ¯ -->
    <div class="debug-info" id="debugInfo">
      <div>æ¨¡å¼: æ¡Œé¢å® ç‰©æµ‹è¯•</div>
      <div>æ‹–æ‹½: å¯ç”¨</div>
      <div>ä½ç½®: <span id="position">0, 0</span></div>
      <div>çŠ¶æ€: <span id="status">å°±ç»ª</span></div>
    </div>
    
    <!-- é€šçŸ¥ -->
    <div class="notification" id="notification"></div>
  </div>

  <script>
    // æ¡Œé¢å® ç‰©æµ‹è¯•è„šæœ¬
    let isDragging = false;
    let dragOffset = { x: 0, y: 0 };
    let debugMode = false;
    
    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ­ æ¡Œé¢å® ç‰©æµ‹è¯•é¡µé¢å·²åŠ è½½');
      showNotification('æ¡Œé¢å® ç‰©æµ‹è¯•æ¨¡å¼å·²å¯åŠ¨');
      
      // è®¾ç½®æ‹–æ‹½åŠŸèƒ½
      setupDragFunctionality();
      
      // è®¾ç½®é”®ç›˜å¿«æ·é”®
      setupKeyboardShortcuts();
      
      // æ›´æ–°è°ƒè¯•ä¿¡æ¯
      updateDebugInfo();
    });
    
    // æ‹–æ‹½åŠŸèƒ½
    function setupDragFunctionality() {
      document.addEventListener('mousedown', function(e) {
        if (e.target.closest('.no-drag')) return;
        
        isDragging = true;
        dragOffset.x = e.clientX;
        dragOffset.y = e.clientY;
        document.body.classList.add('dragging');
        updateStatus('æ‹–æ‹½ä¸­...');
        e.preventDefault();
      });
      
      document.addEventListener('mousemove', function(e) {
        if (!isDragging) return;
        
        const deltaX = e.clientX - dragOffset.x;
        const deltaY = e.clientY - dragOffset.y;
        
        // æ¨¡æ‹Ÿçª—å£ç§»åŠ¨
        console.log(`æ¨¡æ‹Ÿç§»åŠ¨: (${deltaX}, ${deltaY})`);
        updatePosition(e.clientX, e.clientY);
        
        dragOffset.x = e.clientX;
        dragOffset.y = e.clientY;
      });
      
      document.addEventListener('mouseup', function() {
        if (isDragging) {
          isDragging = false;
          document.body.classList.remove('dragging');
          updateStatus('å°±ç»ª');
          showNotification('ä½ç½®å·²æ›´æ–°');
        }
      });
    }
    
    // é”®ç›˜å¿«æ·é”®
    function setupKeyboardShortcuts() {
      document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
          e.preventDefault();
          toggleDebug();
        }
        
        if (e.key === 'Escape') {
          hideAllPanels();
        }
      });
    }
    
    // æ§åˆ¶å‡½æ•°
    function toggleExpression() {
      showNotification('åˆ‡æ¢è¡¨æƒ… ğŸ­');
      updateStatus('è¡¨æƒ…å˜åŒ–');
      // è¿™é‡Œå¯ä»¥é›†æˆçœŸå®çš„ Live2D è¡¨æƒ…æ§åˆ¶
    }
    
    function playMotion() {
      showNotification('æ’­æ”¾åŠ¨ä½œ ğŸ¬');
      updateStatus('åŠ¨ä½œæ’­æ”¾');
      // è¿™é‡Œå¯ä»¥é›†æˆçœŸå®çš„ Live2D åŠ¨ä½œæ’­æ”¾
    }
    
    function toggleAudio() {
      showNotification('éŸ³é¢‘æ§åˆ¶ ğŸ”Š');
      updateStatus('éŸ³é¢‘åˆ‡æ¢');
      // è¿™é‡Œå¯ä»¥é›†æˆéŸ³é¢‘æ§åˆ¶
    }
    
    function toggleLipSync() {
      showNotification('å£å‹åŒæ­¥ ğŸ—£ï¸');
      updateStatus('å£å‹åŒæ­¥');
      // è¿™é‡Œå¯ä»¥é›†æˆå£å‹åŒæ­¥åŠŸèƒ½
    }
    
    function toggleSettings() {
      showNotification('æ‰“å¼€è®¾ç½® âš™ï¸');
      updateStatus('è®¾ç½®é¢æ¿');
      // è¿™é‡Œå¯ä»¥æ‰“å¼€è®¾ç½®é¢æ¿
    }
    
    function toggleDebug() {
      debugMode = !debugMode;
      const debugInfo = document.getElementById('debugInfo');
      debugInfo.classList.toggle('show', debugMode);
      showNotification(debugMode ? 'è°ƒè¯•æ¨¡å¼å·²å¼€å¯' : 'è°ƒè¯•æ¨¡å¼å·²å…³é—­');
    }
    
    function hideAllPanels() {
      showNotification('éšè—æ‰€æœ‰é¢æ¿');
      updateStatus('é¢æ¿éšè—');
    }
    
    // å·¥å…·å‡½æ•°
    function showNotification(message) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 2000);
    }
    
    function updateStatus(status) {
      const statusElement = document.getElementById('status');
      if (statusElement) {
        statusElement.textContent = status;
      }
    }
    
    function updatePosition(x, y) {
      const positionElement = document.getElementById('position');
      if (positionElement) {
        positionElement.textContent = `${x}, ${y}`;
      }
    }
    
    function updateDebugInfo() {
      setInterval(() => {
        if (debugMode) {
          updatePosition(window.screenX || 0, window.screenY || 0);
        }
      }, 1000);
    }
    
    // æ¨¡æ‹Ÿ Live2D åŠ¨ç”»
    function animatePlaceholder() {
      const placeholder = document.querySelector('.live2d-placeholder');
      const emojis = ['ğŸ¦Š', 'ğŸ±', 'ğŸ°', 'ğŸ¼', 'ğŸ¨', 'ğŸ¦'];
      let currentIndex = 0;
      
      setInterval(() => {
        currentIndex = (currentIndex + 1) % emojis.length;
        placeholder.textContent = emojis[currentIndex];
      }, 3000);
    }
    
    // å¯åŠ¨åŠ¨ç”»
    animatePlaceholder();
  </script>
</body>
</html>
